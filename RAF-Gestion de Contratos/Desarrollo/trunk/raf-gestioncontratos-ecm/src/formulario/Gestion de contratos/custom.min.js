function marcarColumnaProveedorSeleccionado(){var a=$("#proveedorSeleccionado").val();""!=a&&($("#btnProveedor"+a).removeClass("glyphicon-hand-left").addClass("glyphicon-hand-down"),$("#tablaDetalleProducto tr td:nth-child("+(Number(a)+3)+")").css("background-color","#DFD3CE"))}function recalcularMontosPorFila(a){var b=a.id.split("___"),c=b[1],d=$("#det_prod_cantidad___"+c).val();$(".rowProvTotalDolares").number(!0,2,",","."),$(".rowProvTotalPesos").number(!0,2,",","."),$(".rowProvTotalPesos").each(function(a,b){a++;var e=$("#det_prod_precioUnitario"+a+"___"+c).val();$("#det_prod_totalPesos"+a+"___"+c).val(e*d);var f=$("#provs_ultimaCotizacion"+a).val();""!=f&&$("#det_prod_totalDolares"+a+"___"+c).val(e*d/f)})}function recalcularFooterEnUSD(){for($(".detProdTotal").number(!0,2,",","."),$(".rowProvTotalDolares").number(!0,2,",","."),i=1;i<=5;i++){$("#detProdTotal"+i).number(!0,2,",",".");var a=0;$(".colProvTotalDolares"+i,$("#tablaDetalleProducto")).each(function(b,c){var d=parseFloat($(this).val());isNaN(d)||(a+=d)}),$("#detProdTotal"+i).val(a),$("#__detProdTotal"+i).val(a)}}function recalcularFooterEnMonedaCotizada(){for($(".detProdTotal").number(!0,2,",","."),$(".rowProvTotalPesos").number(!0,2,",","."),i=1;i<=5;i++){var a=0;$(".colProvTotalPesos"+i,$("#tablaDetalleProducto")).each(function(b,c){var d=parseFloat($(this).val());isNaN(d)||(a+=d)}),$("#detProdTotal"+i+i).val(a),$("#__detProdTotal"+i+i).val(a)}}function recalcularMontosEnUSD(){for($(".det_prod_cantidad").number(!0,2,",","."),$(".det_prod_precioUnitario").number(!0,2,",","."),$(".rowProvTotalPesos").number(!0,2,",","."),$(".rowProvTotalDolares").number(!0,2,",","."),$(".detProdTotal").number(!0,2,",","."),i=1;i<=5;i++){$(".colProvTotalPesos"+i).number(!0,2,",","."),$(".colProvTotalDolares"+i).number(!0,2,",",".");var a=$("#provs_monedaCodigo"+i).val(),b=new SearchConstraint("codigoMoneda1",a,a,ConstraintType.MUST),c=new SearchConstraint("codigoMoneda2","USD","USD",ConstraintType.MUST),d=new Array(b,c),e=DatasetFactory.getDataset("raf-cotizaciones",null,d,null);$("#provs_ultimaCotizacion"+i).val(e.values[0].cotizacion).change(),$("#provs_fechaUltimaCotizacion"+i).val(e.values[0].fechaUltimaActualizacion).change()}$("#tablaDetalleProducto tr:gt(1)").each(function(a,b){$(this).parent().is("tfoot")||(recalcularMontosPorFila($(this).find(".det_prod_unidadMedida")[0]),recalcularFooterEnUSD(),recalcularFooterEnMonedaCotizada())}),onSeleccionarProveedorClick($("#proveedorSeleccionado").val())}function onSeleccionarProveedorClick(a){if($("#tablaProductos tr:gt(1)").remove(),$("#proveedorSeleccionado").val(a),"temporal"==$("#provs_estado"+a).val()){$("#proveedorTemporal").css("visibility","visible"),$("#pro_codigo").val(""),$("#pro_razonSocial").val(""),$("#formaPago_codigo").val(""),$("#formaPago_descripcion").val(""),$("#formaPago_detalle").val(""),$("#moneda").val(""),$("#ultimaCotizacion").val(""),$("#fechaUltimaCotizacion").val(""),$("#montoTotalUSD").val(""),$("#totalUSD").val(""),$("#motivoAdjudicacion").attr("data-parsley-required",!1),$("#frecuenciaFacturacion").attr("data-parsley-required",!1);for(var b=1;b<=5;b++)b!=a&&($("#btnProveedor"+b).removeClass("glyphicon-hand-down").addClass("glyphicon-hand-left"),$("#tablaDetalleProducto tr td:nth-child("+(b+3)+")").css("background-color","table-striped table-bordered table-hover"))}else{$("#proveedorTemporal").css("visibility","hidden"),$("#motivoAdjudicacion").attr("data-parsley-required",!0),$("#frecuenciaFacturacion").attr("data-parsley-required",!0);for(var b=1;b<=5;b++)b!=a?($("#btnProveedor"+b).removeClass("glyphicon-hand-down").addClass("glyphicon-hand-left"),$("#tablaDetalleProducto tr td:nth-child("+(b+3)+")").css("background-color","table-striped table-bordered table-hover")):($("#proveedorSeleccionado").val(b),$("#btnProveedor"+b).removeClass("glyphicon-hand-left").addClass("glyphicon-hand-down"),$("#tablaDetalleProducto tr td:nth-child("+(b+3)+")").css("background-color","#DFD3CE"));$("#pro_codigo").val($("#provs_codigo"+a).val()),$("#pro_razonSocial").val($("#provs_razonSocial"+a).val()),$("#formaPago_codigo").val($("#provs_formaPagoCodigo"+a).val()),$("#formaPago_descripcion").val($("#provs_formaPagoDesc"+a).val()),$("#formaPago_detalle").val($("#provs_detalle"+a).val()),$("#ultimaCotizacion").val($("#provs_ultimaCotizacion"+a).val()),$("#fechaUltimaCotizacion").val($("#provs_fechaUltimaCotizacion"+a).val()),$("#moneda").val($("#provs_monedaDesc"+a).val()),$(".detProdTotal").number(!0,2,",",".");var c=0;$("#tablaDetalleProducto tr:gt(1)").each(function(b,d){if(!$(this).parent().is("tfoot")){var e=$("#tablaProductos").ecmmasterdetail("addNewRow");$(".prod_cantidad",e).number(!0,2,",","."),$(".prod_precioUnitario",e).number(!0,2,",","."),$(".prod_total",e).number(!0,2,",","."),$(".prod_totalDolares",e).number(!0,2,",",".");var f=$(this).find("input.det_prod_precioUnitario:eq("+(a-1)+")").val(),g=$(this).find("input.rowProvTotalPesos:eq("+(a-1)+")").val(),h=$(this).find("input.rowProvTotalDolares:eq("+(a-1)+")").val();$(".prod_code",e).val($(this).find("input.det_prod_codigo").val()),$(".prod_descripcion",e).val($(this).find("textarea.det_prod_descripcion").val()),$(".prod_unidadMedida",e).val($(this).find("input.det_prod_unidadMedida").val()),$(".prod_cantidad",e).val($(this).find("input.det_prod_cantidad").val()),$(".prod_precioUnitario",e).val(f),$(".prod_total",e).val(g),$(".prod_totalDolares",e).val(h),$(".prod_moneda",e).val($(this).find("input.det_prod_moneda").val()),$(".prod_decripcion_ampliada_id",e).val($(this).find("textarea.ampliada").attr("id")),c+=Number(h)}}),$("#totalUSD").number(!0,2,",","."),$("#montoTotalUSD").val(c),$("#totalUSD").val(c)}}function cantidadProveedores(){var a=0;$("#tablaProveedores tr:gt(0)").each(function(b,c){b+=1,""!=$("#tablaProveedores tr input[name='provs_codDesc"+b+"']").val()&&a++}),$("#provs_countProveedores").val(a)}function seleccionImputacionContable(){"imputacionContable1"==$("input:radio[name=imputacionContable]:checked").val()&&($("#divCodigoInversion").css("display","block"),$("#divClaveAsignacion").css("display","none"),$("#divCombinacionCuentas").css("display","none"),$("#inversion_codigo").attr("disabled",!1),$("#asignacion_codigo").attr("disabled","disabled"),$("#asignacion_codigo").val(""),$("#asignacion_descripcion").val(""),$("#btnNuevaCuenta").attr("disabled","disabled"),$("#tablaCuenta .glyphicon-remove").hide(),$("#tablaCuenta tr:gt(1)").remove(),$("#sumatoria_porcentaje").val(""),$("#divSumatoriaPorcentaje").css("visibility","hidden")),"imputacionContable2"==$("input:radio[name=imputacionContable]:checked").val()&&($("#divCodigoInversion").css("display","none"),$("#divClaveAsignacion").css("display","block"),$("#divCombinacionCuentas").css("display","none"),$("#inversion_codigo").attr("disabled","disabled"),$("#asignacion_codigo").attr("disabled",!1),$("#inversion_codigo").val(""),$("#inversion_descripcion").val(""),$("#btnNuevaCuenta").attr("disabled","disabled"),$("#tablaCuenta .glyphicon-remove").hide(),$("#tablaCuenta tr:gt(1)").remove(),$("#sumatoria_porcentaje").val(""),$("#divSumatoriaPorcentaje").css("visibility","hidden")),"imputacionContable3"==$("input:radio[name=imputacionContable]:checked").val()&&($("#divCodigoInversion").css("display","none"),$("#divClaveAsignacion").css("display","none"),$("#divCombinacionCuentas").css("display","block"),$("#inversion_codigo").attr("disabled","disabled"),$("#asignacion_codigo").attr("disabled","disabled"),$("#inversion_codigo").val(""),$("#inversion_descripcion").val(""),$("#asignacion_codigo").val(""),$("#asignacion_descripcion").val(""),$("#tablaCuenta .glyphicon-remove").show(),$("#btnNuevaCuenta").attr("disabled",!1),$(".btnEliminarCuenta").css("display","block"),$(".btnEliminarCuenta:visible")),"imputacionContable3"==$("input:radio[name=imputacionContable]:checked").val()?$("#btnNuevaCuenta").attr("disabled",!1):$("#btnNuevaCuenta").attr("disabled","disabled")}function agregarDocumentosAsociados(a){for(var b=0;b<a.length;b++)if(b%2==0){var c=$("#tablaDocumentos").ecmmasterdetail("addNewRow");$(".documentoAsociadoNombre1",c).val(a[b])}else $(".documentoAsociadoNombre2",c).val(a[b]);ocultarDocumentosAsociadosVacios()}function ocultarDocumentosAsociadosVacios(){""==$("#tablaDocumentos .documentoAsociadoNombre2:last").val()&&($("#tablaDocumentos .documentoAsociadoChk2:last").hide(),$("#tablaDocumentos .documentoAsociadoNombre2:last").hide())}var arqForms={initForm:function(a){var b=this;$("#tablaDocumentos").ecmmasterdetail(),$(function(){"ADD"==a||"MOD"==a?b.onEdit():b.onView()})},onView:function(){for($(".detProdTotal").number(!0,2,",","."),$("#__detProdTotal1").number(!0,2,",","."),$("#ultimaCotizacion").number(!0,2,",","."),$("#titulo1").text($("#__titulo1").val()),$("#titulo2").text($("#__titulo2").val()),$("#titulo3").text($("#__titulo3").val()),$("#titulo4").text($("#__titulo4").val()),$("#titulo5").text($("#__titulo5").val()),$("#detProdTotal1").text($.number(Number($("#__detProdTotal1").val()),2,",",".")),$("#detProdTotal2").text($.number(Number($("#__detProdTotal2").val()),2,",",".")),$("#detProdTotal3").text($.number(Number($("#__detProdTotal3").val()),2,",",".")),$("#detProdTotal4").text($.number(Number($("#__detProdTotal4").val()),2,",",".")),$("#detProdTotal5").text($.number(Number($("#__detProdTotal5").val()),2,",",".")),$("#detProdTotal11").text($.number(Number($("#__detProdTotal11").val()),2,",",".")),$("#detProdTotal22").text($.number(Number($("#__detProdTotal22").val()),2,",",".")),$("#detProdTotal33").text($.number(Number($("#__detProdTotal33").val()),2,",",".")),$("#detProdTotal44").text($.number(Number($("#__detProdTotal44").val()),2,",",".")),$("#detProdTotal55").text($.number(Number($("#__detProdTotal55").val()),2,",",".")),$("#sumatoria_porcentaje").text($("#__sumatoria_porcentaje").val()),$(".btn").hide(),$(".btnEliminarCuenta").hide(),i=1;i<=5;i++)$(".colProvTotalPesos"+i).number(!0,2,",","."),$(".colProvTotalDolares"+i).number(!0,2,",",".");var a=$("#proveedorSeleccionado").val();a=parseInt(a),isNaN(a)||($("#btnProveedor"+a).removeClass("glyphicon-hand-left").addClass("glyphicon-hand-down"),a+=parseInt(3),$("#tablaDetalleProducto tr:gt(1)").length>0&&$("#tablaDetalleProducto tr td:nth-child("+a+")").css("background-color","#DFD3CE")),$("#tablaProductos tr").each(function(a){var b=function(){var a=$(this).closest("tr").find("input.prod_decripcion_ampliada_id").val();$("#descripcionAmpliada").text($("#"+a).text()),$(".btn-primary").css("display","none"),$("#descripcionAmpliada").attr("readonly","readonly")};$(".glyphicon-comment",$(this)).click(b)}),$("#tablaDetalleProducto tr").each(function(a){var b=function(){var a=$(this).closest("tr").find("span.det_prod_cantidad").attr("id").split("___"),b=a[1];$("#descripcionAmpliada").text($("#ampliada___"+b).text()),$(".btn-primary").css("display","none"),$("#descripcionAmpliada").attr("readonly","readonly")};$(".glyphicon-comment",$(this)).click(b)});var b=$("input:radio[name=imputacionContable]:checked").val();"undefined"!=typeof b&&null!==b?seleccionImputacionContable():($("#divCodigoInversion").css("display","none"),$("#divClaveAsignacion").css("display","none"),$("#divCombinacionCuentas").css("display","none"))},onEdit:function(){for($(".detProdTotal").number(!0,2,",","."),$("#ultimaCotizacion").number(!0,2,",","."),$("#titulo1").val($("#__titulo1").val()),$("#titulo2").val($("#__titulo2").val()),$("#titulo3").val($("#__titulo3").val()),$("#titulo4").val($("#__titulo4").val()),$("#titulo5").val($("#__titulo5").val()),$("#detProdTotal1").val($("#__detProdTotal1").val()),$("#detProdTotal2").val($("#__detProdTotal2").val()),$("#detProdTotal3").val($("#__detProdTotal3").val()),$("#detProdTotal4").val($("#__detProdTotal4").val()),$("#detProdTotal5").val($("#__detProdTotal5").val()),$("#detProdTotal11").val($("#__detProdTotal11").val()),$("#detProdTotal22").val($("#__detProdTotal22").val()),$("#detProdTotal33").val($("#__detProdTotal33").val()),$("#detProdTotal44").val($("#__detProdTotal44").val()),$("#detProdTotal55").val($("#__detProdTotal55").val()),$("#sumatoria_porcentaje").val($("#__sumatoria_porcentaje").val()),$("#tablaProductos").ecmmasterdetail({onCustomizeRow:function(a){var b=function(){var a=$(this).closest("tr").find("input.prod_decripcion_ampliada_id").val();$("#descripcionAmpliada").val($("#"+a).val()),$(".btn-primary").css("display","none"),$("#descripcionAmpliada").attr("readonly","readonly")};$(".glyphicon-comment",a).click(b)}}),ocultarDocumentosAsociadosVacios(),$("#proveedorTemporal").css("visibility","hidden"),$("#desvioPermitido").number(!0,0,"",""),e=1;e<=5;e++)$(".colProvTotalPesos"+e).number(!0,2,",","."),$(".colProvTotalDolares"+e).number(!0,2,",",".");$("#fechaFirmaContrato, #fechaRevision, #fechaEntradaVigencia, #fechaFinVigencia").ecmdatetimepicker({pickTime:!1,language:"es",format:"dd/mm/yyyy",autoclose:!0,todayHighlight:!0});var a=new Date,b=a.getDate(),c=a.getMonth()+1,d=a.getFullYear();b<10&&(b="0"+b),c<10&&(c="0"+c),a=b+"/"+c+"/"+d,$("#fechaRegistracion").attr("disabled","disabled"),$("#fechaRegistracion").val(a),$("#referenciaControl").ecmzoom({datasetId:"raf-referenciaControl",dataFields:[{id:"descripcion",value:"Descripci�n"}],filterValues:[{id:"metadata%23active",value:!0}],resultFields:["descripcion"],callback:function(a){$("#referenciaControl").val(a.descripcion).change()},clean:function(a){$("#referenciaControl").val("").change()}}),$("#sector").ecmzoom({datasetId:"raf-sectores",dataFields:[{id:"codigo",value:"C�digo"},{id:"nombre",value:"Nombre"}],resultFields:["codigo","nombre"],callback:function(a){$("#sector").val(a.nombre).change()},clean:function(a){$("#sector").val("").change()}}),$("#rubro").ecmzoom({datasetId:"raf-rubros",dataFields:[{id:"rub_codigo",value:"C�digo"},{id:"rub_descripcion",value:"Descripci�n"}],filterValues:[{id:"metadata%23active",value:!0}],resultFields:["rub_codigo","rub_descripcion"],callback:function(a){$("#rubro").val(a.rub_descripcion).change()},clean:function(a){$("#rubro").val("").change()}}),$("#frecuenciaFacturacion").ecmzoom({datasetId:"raf-frecuencia-facturacion",dataFields:[{id:"fre_codigo",value:"C�digo"},{id:"fre_descripcion",value:"Descripci�n"}],filterValues:[{id:"metadata%23active",value:!0}],resultFields:["fre_descripcion"],callback:function(a){$("#frecuenciaFacturacion").val(a.fre_descripcion).change()},clean:function(a){$("#frecuenciaFacturacion").val("").change()}}),$("#motivoAdjudicacion").ecmzoom({datasetId:"raf-motivo-adjudicacion",dataFields:[{id:"mot_codigo",value:"C�digo"},{id:"mot_descripcion",value:"Descripci�n"}],filterValues:[{id:"metadata%23active",value:!0}],resultFields:["mot_descripcion"],callback:function(a){$("#motivoAdjudicacion").val(a.mot_descripcion).change()},clean:function(a){$("#motivoAdjudicacion").val("").change()}}),$("#inversion_codigo").ecmzoom({datasetId:"raf-inversiones",dataFields:[{id:"codigo",value:"C�digo"},{id:"descripcion",value:"Descripci�n"},{id:"activo",value:"Activo"}],filterValues:[{id:"metadata%23active",value:!0}],resultFields:["codigo","descripcion","activo"],callback:function(a){$("#inversion_codigo").val(a.codigo).change(),$("#inversion_descripcion").val(a.descripcion).change()},clean:function(a){$("#inversion_codigo").val("").change(),$("#inversion_descripcion").val("").change()}}),$("#asignacion_codigo").ecmzoom({datasetId:"raf-asignaciones",dataFields:[{id:"codigo",value:"C�digo"},{id:"descripcion",value:"Descripci�n"}],filterValues:[{id:"metadata%23active",value:!0}],resultFields:["codigo","descripcion"],callback:function(a){$("#asignacion_codigo").val(a.codigo).change(),$("#asignacion_descripcion").val(a.descripcion).change()},clean:function(a){$("#asignacion_codigo").val("").change(),$("#asignacion_descripcion").val("").change()}}),$("#referenciaControl").ecmzoom({datasetId:"raf-referencias-control",dataFields:[{id:"referenciaControl",value:"C�digo"}],filterValues:[{id:"metadata%23active",value:!0}],resultFields:["referenciaControl"],callback:function(a){$("#referenciaControl").val(a.referenciaControl).change()},clean:function(a){$("#referenciaControl").val("").change()}});for(var e=1;e<=5;e++)$("#provs_codDesc"+e).ecmzoom({datasetId:"raf-proveedores",dataFields:[{id:"codigoProveedor",value:"C�digo"},{id:"razonSocialProveedor",value:"Raz�n Social"},{id:"codigoFormaPago",value:"Forma Pago C�digo"},{id:"descripcionFormaPago",value:"Forma Pago Descripci�n"},{id:"estadoProveedor",value:"Estado"}],filterValues:[{id:"metadata%23active",value:!0}],resultFields:["codigoProveedor","razonSocialProveedor","codigoFormaPago","descripcionFormaPago","estadoProveedor"],callback:function(a){var b=a.type.substring(a.type.length-1);$("#provs_codDesc"+b).val(a.codigoProveedor+" - "+a.razonSocialProveedor).change(),$("#provs_codigo"+b).val(a.codigoProveedor).change(),$("#provs_razonSocial"+b).val(a.razonSocialProveedor).change(),$("#provs_formaPagoCodigo"+b).val(a.codigoFormaPago).change(),$("#provs_formaPagoDesc"+b).val(a.descripcionFormaPago).change(),$("#provs_estado"+b).val(a.estadoProveedor).change(),$("#titulo"+b).val(a.razonSocialProveedor).change(),$("#__titulo"+b).val(a.razonSocialProveedor).change(),cantidadProveedores()}}),$("#provs_formaPagoDesc"+e).ecmzoom({datasetId:"raf-formas-pago",dataFields:[{id:"codigo",value:"C�digo"},{id:"descripcion",value:"Descripci�n"}],filterValues:[{id:"metadata%23active",value:!0}],resultFields:["codigo","descripcion"],callback:function(a){var b=a.type.substring(a.type.length-1);$("#provs_formaPagoCodigo"+b).val(a.codigo).change(),$("#provs_formaPagoDesc"+b).val(a.descripcion).change()}}),$("#provs_monedaDesc"+e).ecmzoom({datasetId:"raf-monedas",dataFields:[{id:"codigo",value:"C�digo"},{id:"descripcion",value:"Descripci�n"}],filterValues:[{id:"metadata%23active",value:!0}],resultFields:["codigo","descripcion"],callback:function(a){var b=a.type.substring(a.type.length-1);$("#provs_monedaCodigo"+b).val(a.codigo).change(),$("#provs_monedaDesc"+b).val(a.descripcion).change(),$(".det_prod_moneda"+b).val(a.descripcion).change(),recalcularMontosEnUSD()}});var f=function(){$("#provs_codDesc1").ecmzoom("option","filterValues",[{id:"textoBusqueda",value:$("#provs_codDesc1").val()}])};$("#provs_codDesc1").blur(f);var g=function(){$("#provs_codDesc2").ecmzoom("option","filterValues",[{id:"textoBusqueda",value:$("#provs_codDesc2").val()}])};$("#provs_codDesc2").blur(g);var h=function(){$("#provs_codDesc3").ecmzoom("option","filterValues",[{id:"textoBusqueda",value:$("#provs_codDesc3").val()}])};$("#provs_codDesc3").blur(h);var i=function(){$("#provs_codDesc4").ecmzoom("option","filterValues",[{id:"textoBusqueda",value:$("#provs_codDesc4").val()}])};$("#provs_codDesc4").blur(i);var j=function(){$("#provs_codDesc5").ecmzoom("option","filterValues",[{id:"textoBusqueda",value:$("#provs_codDesc5").val()}])};$("#provs_codDesc5").blur(j),marcarColumnaProveedorSeleccionado(),$(".btnProveedor1").click(function(){onSeleccionarProveedorClick(1)}),$(".btnProveedor2").click(function(){onSeleccionarProveedorClick(2)}),$(".btnProveedor3").click(function(){onSeleccionarProveedorClick(3)}),$(".btnProveedor4").click(function(){onSeleccionarProveedorClick(4)}),$(".btnProveedor5").click(function(){onSeleccionarProveedorClick(5)}),$("#btnGuardar").click(function(){$($("#indexAmpliada").val()).val($("#descripcionAmpliada").val()),$("#btnCerrar").click()}),$("#tablaDetalleProducto").ecmmasterdetail({buttonNewRow:"#btnNuevoDetalleProducto",buttonsDeleteRow:".btnEliminarDetalleProducto",onDeleteRow:function(a){var b;return b=confirm("Confirma eliminaci�n?")},afterDeleteRow:function(a){recalcularFooterEnUSD(),recalcularFooterEnMonedaCotizada(),onSeleccionarProveedorClick($("#proveedorSeleccionado").val())},onCustomizeRow:function(a){for($(".noCodificado",a).prop("checked")?($(".det_prod_buscar",a).attr("disabled","disabled"),$(".det_prod_buscar",a).val(""),$(".det_prod_codigo",a).attr("disabled","disabled"),$(".det_prod_codigo",a).css("display","none"),$(".det_prod_codigo",a).val(""),$(".det_prod_descripcion",a).attr("readonly",!1),$(".det_prod_descripcion",a).attr("placeholder","DESCRIPCI�N"),$(".det_prod_unidadMedida",a).attr("disabled",!1)):($(".det_prod_buscar",a).attr("disabled",!1),$(".det_prod_codigo",a).css("display","block"),$(".det_prod_codigo",a).css("disabled","disabled"),$(".det_prod_descripcion",a).attr("readonly","readonly"),$(".det_prod_descripcion",a).attr("placeholder","DESCRIPCI�N"),$(".det_prod_unidadMedida",a).attr("disabled","disabled")),$(".det_prod_descripcion",a).attr("data-parsley-required",!0),$(".det_prod_cantidad",a).attr("data-parsley-required",!0),$(".det_prod_unidadMedida",a).attr("data-parsley-required",!0),$(".noCodificado",a).click(function(){this.checked?($(".det_prod_buscar",a).attr("disabled","disabled"),$(".det_prod_buscar",a).val(""),$(".det_prod_codigo",a).attr("disabled","disabled"),$(".det_prod_codigo",a).css("display","none"),$(".det_prod_codigo",a).val(""),$(".det_prod_descripcion",a).attr("readonly",!1),$(".det_prod_descripcion",a).val(""),$(".det_prod_descripcion",a).attr("placeholder","DESCRIPCI�N"),$(".det_prod_unidadMedida",a).val(""),$(".det_prod_unidadMedida",a).attr("disabled",!1)):($(".det_prod_unidadMedida",a).val(""),$(".det_prod_buscar",a).attr("disabled",!1),$(".det_prod_codigo",a).css("display","block"),$(".det_prod_codigo",a).css("disabled","disabled"),$(".det_prod_descripcion",a).attr("readonly","readonly"),$(".det_prod_descripcion",a).val(""),$(".det_prod_descripcion",a).attr("placeholder","DESCRIPCI�N"),$(".det_prod_unidadMedida",a).attr("disabled","disabled"))}),$(".rowProvTotalPesos").attr("disabled","disabled"),$(".det_prod_buscar",a).ecmzoom({datasetId:"raf-productos",dataFields:[{id:"codigoProducto",value:"C�digo"},{id:"descripcionProducto",value:"Descripci�n"},{id:"estadoProducto",value:"Descripci�n"},{id:"codigoUnidadMedida",value:"Descripci�n"},{id:"descUnidadMedida",value:"Descripci�n"}],filterValues:[{id:"metadata%23active",value:!0}],resultFields:["codigoProducto","descripcionProducto","estadoProducto","codigoUnidadMedida","descUnidadMedida"],callback:function(b){$(".det_prod_codigo",a).val(b.codigoProducto).change(),$(".det_prod_descripcion",a).val(b.descripcionProducto).change(),$(".det_prod_unidadMedida",a).val(b.codigoUnidadMedida).change(),$(".det_prod_unidadMedidaDes",a).val(b.descUnidadMedida).change()}}),$(".det_prod_buscar",a).blur(function(){$(".det_prod_buscar",a).ecmzoom("option","filterValues",[{id:"textoBusqueda",value:$(".det_prod_buscar",a).val()}])}),$(".det_prod_cantidad",a).number(!0,2,",","."),$(".det_prod_precioUnitario",a).number(!0,2,",","."),$(".rowProvTotalPesos",a).number(!0,2,",","."),$(".rowProvTotalDolares",a).number(!0,2,",","."),$(".detProdTotal").number(!0,2,",","."),e=1;e<=5;e++)$(".colProvTotalPesos"+e).number(!0,2,",","."),$(".colProvTotalDolares"+e).number(!0,2,",","."),$(".det_prod_moneda"+e).val($("#provs_monedaDesc"+e).val());$(".det_prod_unidadMedida",a).ecmzoom({datasetId:"raf-unidades",dataFields:[{id:"codigo",value:"C�digo"},{id:"descripcion",value:"Descripci�n"}],filterValues:[{id:"metadata%23active",value:!0}],resultFields:["codigo","descripcion"],callback:function(b){$(".det_prod_unidadMedida",a).val(b.codigo).change()}});var c=function(){var b=$(".noCodificado",a).attr("id").split("___"),c=b[1];$("#descripcionAmpliada").val($("#ampliada___"+c).val()),$("#indexAmpliada").val("#ampliada___"+c),$(".btn-primary").css("display","inline"),$("#descripcionAmpliada").attr("readonly",!1),$("#ampliada").val($("#ampliada___"+c).val())};$("#btnAgregarComentario",a).click(c),$(".det_prod_cantidad, .det_prod_precioUnitario",a).blur(function(){recalcularMontosPorFila(this),recalcularFooterEnUSD(),recalcularFooterEnMonedaCotizada()}),$(".det_prod_cantidad, .det_prod_precioUnitario",a).blur(function(){onSeleccionarProveedorClick($("#proveedorSeleccionado").val())}),$(".det_prod_unidadMedida, .det_prod_descripcion",a).change(function(){onSeleccionarProveedorClick($("#proveedorSeleccionado").val())})}});var k=function(){$("#titulo1").attr("title",$("#titulo1").val())};$("#titulo1").mousemove(k);var l=function(){$("#titulo2").attr("title",$("#titulo2").val())};$("#titulo2").mousemove(l);var m=function(){$("#titulo3").attr("title",$("#titulo3").val())};$("#titulo3").mousemove(m);var n=function(){$("#titulo4").attr("title",$("#titulo4").val())};$("#titulo4").mousemove(n);var o=function(){$("#titulo5").attr("title",$("#titulo5").val())};$("#titulo5").mousemove(o),$("#tablaCuenta").ecmmasterdetail({buttonNewRow:"#btnNuevaCuenta",buttonsDeleteRow:".btnEliminarCuenta",onDeleteRow:function(a){var b;return b=confirm("Confirma eliminaci�n?")},afterDeleteRow:function(){this.sumatoriaPorcentaje(),0==$("#tablaCuenta tr:gt(2)").length&&$("#divSumatoriaPorcentaje").css("visibility","hidden")},onCustomizeRow:function(a){$(".cta_porcentaje",a).number(!0,2,",","."),$("#sumatoria_porcentaje").number(!0,2,",","."),$(".cta_codigo",a).ecmzoom({datasetId:"raf-cuentas-contables",dataFields:[{id:"codigo",value:"C�digo"},{id:"descripcion",value:"Descripci�n"},{id:"activo",value:"Activo"}],filterValues:[{id:"metadata%23active",value:!0}],resultFields:["codigo","descripcion","activo"],callback:function(b){$(".cta_codigo",a).val(b.codigo).change(),$(".cta_descripcion",a).val(b.descripcion).change(),$(".cta_activo",a).val(b.activo).change(),$(".cta_subcuenta_codigo",a).ecmzoom("option","filterValues",[{id:"codigoCuentaContable",value:b.codigo}])}}),$(".cta_subcuenta_codigo",a).ecmzoom({datasetId:"raf-subcuentas",dataFields:[{id:"codigo",value:"C�digo"},{id:"descripcion",value:"Descripci�n"},{id:"activo",value:"Activo"}],filterValues:[{id:"metadata%23active",value:!0}],resultFields:["codigo","descripcion","activo"],callback:function(b){$(".cta_subcuenta_codigo",a).val(b.codigo).change(),$(".cta_subcuenta_descripcion",a).val(b.descripcion).change(),$(".cta_subcuenta_activo",a).val(b.activo).change()}}),$(".cta_centroCosto_codDesc",a).ecmzoom({datasetId:"raf-centros-costo",dataFields:[{id:"codigo",value:"C�digo"},{id:"descripcion",value:"Descripci�n"},{id:"activo",value:"Activo"}],filterValues:[{id:"metadata%23active",value:!0}],resultFields:["codigo","descripcion","activo"],callback:function(b){$(".cta_centroCosto_codDesc",a).val(b.codigo+" - "+b.descripcion).change(),$(".cta_centroCosto_codigo",a).val(b.codigo).change(),$(".cta_centroCosto_desc",a).val(b.descripcion).change(),$(".cta_centroCosto_activo",a).val(b.activo).change()}}),$(".cta_proyecto_descripcion",a).ecmzoom({datasetId:"raf-proyectos",dataFields:[{id:"codigo",value:"C�digo"},{id:"descripcion",value:"Descripci�n"},{id:"activo",value:"Activo"}],filterValues:[{id:"metadata%23active",value:!0}],resultFields:["codigo","descripcion","activo"],callback:function(b){$(".cta_proyecto_codigo",a).val(b.codigo).change(),$(".cta_proyecto_descripcion",a).val(b.descripcion).change(),$(".cta_proyecto_activo",a).val(b.activo).change()}});var b=this;$(".cta_porcentaje",a).blur(function(){b.sumatoriaPorcentaje()})},sumatoriaPorcentaje:function(){var a=0;$(".cta_porcentaje:visible",$("#tablaCuenta")).each(function(b,c){var d=parseFloat($(this).val());isNaN(d)||(a+=d)}),$("#sumatoria_porcentaje").val(a),$("#__sumatoria_porcentaje").val(a),100==a?$("#divSumatoriaPorcentaje").css("visibility","hidden"):$("#divSumatoriaPorcentaje").css("visibility","visible")}}),$("input:radio[name=imputacionContable]").is(":checked")?("imputacionContable1"==$("input:radio[name=imputacionContable]:checked").val()&&($("#divCodigoInversion").css("display","block"),$("#divClaveAsignacion").css("display","none"),$("#divCombinacionCuentas").css("display","none")),"imputacionContable2"==$("input:radio[name=imputacionContable]:checked").val()&&($("#divCodigoInversion").css("display","none"),$("#divClaveAsignacion").css("display","block"),$("#divCombinacionCuentas").css("display","none")),"imputacionContable3"==$("input:radio[name=imputacionContable]:checked").val()&&($("#divCodigoInversion").css("display","none"),$("#divClaveAsignacion").css("display","none"),$("#divCombinacionCuentas").css("display","block"))):($("#divCodigoInversion").css("display","none"),$("#divClaveAsignacion").css("display","none"),$("#divCombinacionCuentas").css("display","none")),$("input[name=imputacionContable]").click(function(){seleccionImputacionContable()}),$("#form").ecmlib({custom:{init:function(){},workflow:{"Cargar Contrato o Revision":{task:[0,1,34],custom:function(){},otherwise:function(){$.each($("form").serializeArray(),function(a,b){$('[name="'+b.name+'"]').attr("disabled","disabled")}),$(".btnEliminarDetalleProducto").remove(),$(".btnEliminarCuenta").remove(),$(".btnNuevoDetalleProducto").remove(),$(".btnNuevaCuenta").remove(),$("#btnNuevoDetalleProducto").attr("disabled","disabled"),$(".noCodificado").attr("disabled","disabled"),$("input:radio[name=tipoContrato]").attr("disabled","disabled"),$(".documentoAsociadoChk1").attr("disabled","disabled"),$(".documentoAsociadoChk2").attr("disabled","disabled"),$("#tablaCuenta .glyphicon-remove").hide(),$("input[name=imputacionContable]:checked").val()||$("input:radio[name=imputacionContable]").attr("disabled","disabled");for(var a=1;a<=5;a++)$("#btnProveedor"+a).remove();$(".glyphicon glyphicon-trash").hide()}},"Adjuntar Contrato Firmado":{task:29,custom:function(){$("#fechaFirmaContrato").attr("disabled",!1),$("#fechaFirmaContrato").attr("required",!0),$("#fechaEntradaVigencia").attr("disabled",!1),$("#fechaEntradaVigencia").attr("required",!0),$("#fechaFinVigencia").attr("disabled",!1),$("#fechaFinVigencia").attr("required",!0),$("#fechaRevision").attr("disabled",!1),$("#fechaRevision").attr("required",!0)},otherwise:function(){}},"Tareas que requieren recalcular cotizacion":{task:[7,34,35,36,38,39,41,42],custom:function(){recalcularMontosEnUSD()},otherwise:function(){}},otherwise:{custom:function(){}}}},parsley:{}})}};