function createDataset(fields, constraints, sortFields) {

	//arq_libreriaJS.js - All rights reserverd
	
	var dataset =  DatasetBuilder.newDataset();
	dataset.addColumn("lib");
	dataset.addColumn("name");
	dataset.addColumn("version");
	dataset.addColumn("revision");
	dataset.addColumn("src");
	dataset.addColumn("author");
	
	dataset.addRow(["com.arquimeda.fluig.js.ws.BPM-v1",
	                "bpm",
	                "1",
	                "0",
	                '({simpleMerge:function(a,b){var c={};for(attrname in a)c[attrname]=a[attrname];for(attrname in b)c[attrname]=b[attrname];return c},getCardData:function(a){try{for(var b=hAPI.getCardData(a),c=b.entrySet().toArray(),d={},e=0;e<c.length;e++)d[c[e].getKey()]=c[e].getValue();return d}catch(b){throw log.error("**** Error el obtener los datos del formulario de la  solicitud nro. "+a+" :"+b),b}},startProcess:function(a){var b=this.simpleMerge({username:"",password:"",companyId:"",processId:"",choosedState:0,colleagueIds:[],comments:"",userId:"",completeTask:!0,attachments:[],cardData:{},managerMode:!0,workflowPackage:"com.fluig.bpm",workflowServiceName:"ECMWorkflowEngineService",log:0},a);try{var c=ServiceManager.getService(b.workflowServiceName).getBean(),d=c.instantiate(b.workflowPackage+".ECMWorkflowEngineServiceService"),e=d.getWorkflowEngineServicePort(),f=org.apache.cxf.frontend.ClientProxy.getClient(e);f.getConduit().getClient().setReceiveTimeout(18e4);var g=org.apache.commons.io.IOUtils,h=function(a){for(var d=c.instantiate(b.workflowPackage+".StringArray"),e=0;e<a.length;e++)d.getItem().add(a[e].toString());return d},i=h(b.colleagueIds),j=c.instantiate(b.workflowPackage+".ProcessAttachmentDtoArray"),k=c.instantiate(b.workflowPackage+".StringArrayArray"),l=c.instantiate(b.workflowPackage+".ProcessTaskAppointmentDtoArray");if(b.cardData){b.log&&log.info("***    Hay cardData ");for(valor in b.cardData){b.log&&log.info("***   1  cardData "+valor+": "+b.cardData[valor]);var m=h([valor,b.cardData[valor]]);k.getItem().add(m)}}if(b.log&&log.info("*** cardData.getItem() "+k.getItem()),b.attachments){b.log&&log.info("***    Hay Attach ");for(var n=0;n<b.attachments.length;n++){var o=b.attachments[n].description,p=b.attachments[n].path;b.log&&log.info("***     attach "+o+": "+p);var q=c.instantiate(b.workflowPackage+".ProcessAttachmentDto"),r=c.instantiate(b.workflowPackage+".Attachment"),s=new java.io.File(p),t=new java.io.FileInputStream(s),u=g.toByteArray(t);t.close(),b.log&&log.info("***  1  Existe: "+s.exists()+" leng:"+u.length),r.setAttach(!0),r.setFileName(s.getName()),r.setPrincipal(!0),r.setFilecontent(u),q.setDescription(o),q.setNewAttach(!0),q.setFileName(s.getName()),q.setDeleted(!1),q.getAttachments().add(r),j.getItem().add(q)}}log.info("**** Iniciando proceso "+b.processId+"....");var v=e.startProcess(b.username,b.password,b.companyId,b.processId,b.choosedState,i,b.comments,b.userId,b.completeTask,j,k,l,b.managerMode);b.log&&log.info("***  Resultado inicio proceso: "+b.processId+" "+v);var w="",x="";if(null!=v)for(var n=0;n<v.getItem().size();n++){var y=v.getItem().get(n),z=y.getItem().get(0),A=y.getItem().get(1);b.log&&log.info("***  Resultado inicio proceso: "+b.processId+" "+z+": "+A),"iProcess"==z?w=A:"ERROR"==z&&(x=A)}if(""==w)throw"Error iniciando proceso: "+x;return log.info("**** Proceso inciado"+b.processId+" iProcess:"+w),w}catch(a){throw log.error("*** Error en crear proceso automatico "+b.processId+" :"+a),a}},saveAndSendTask:function(a){var b=this.simpleMerge({username:"",password:"",companyId:"",processInstanceId:"",choosedState:0,colleagueIds:[],comments:"",userId:"",completeTask:!0,attachments:[],cardData:{},managerMode:!0,threadSequence:0,workflowPackage:"com.fluig.bpm",workflowServiceName:"ECMWorkflowEngineService",log:0},a);try{var c=ServiceManager.getService(b.workflowServiceName).getBean(),d=c.instantiate(b.workflowPackage+".ECMWorkflowEngineServiceService"),e=d.getWorkflowEngineServicePort(),f=org.apache.cxf.frontend.ClientProxy.getClient(e);f.getConduit().getClient().setReceiveTimeout(18e4);var g=org.apache.commons.io.IOUtils,h=function(a){for(var d=c.instantiate(b.workflowPackage+".StringArray"),e=0;e<a.length;e++)d.getItem().add(a[e].toString());return d},i=h(b.colleagueIds),j=c.instantiate(b.workflowPackage+".ProcessAttachmentDtoArray"),k=c.instantiate(b.workflowPackage+".StringArrayArray"),l=c.instantiate(b.workflowPackage+".ProcessTaskAppointmentDtoArray");if(b.cardData){b.log&&log.info("***    Hay cardData ");for(valor in b.cardData){b.log&&log.info("***  cardData:  "+valor+":"+b.cardData[valor]);var m=h([valor,b.cardData[valor]]);k.getItem().add(m)}}if(b.log&&log.info("*** cardData.getItem() "+k.getItem()),b.attachments){b.log&&log.info("***    Hay Attach ");for(var n=0;n<b.attachments.length;n++){var o=b.attachments[n].description,p=b.attachments[n].path;b.log&&log.info("***     attach "+o+": "+p);var q=c.instantiate(b.workflowPackage+".ProcessAttachmentDto"),r=c.instantiate(b.workflowPackage+".Attachment"),s=new java.io.File(p),t=new java.io.FileInputStream(s),u=g.toByteArray(t);t.close(),b.log&&log.info("***  1  Existe: "+s.exists()+" leng:"+u.length),r.setAttach(!0),r.setFileName(s.getName()),r.setPrincipal(!0),r.setFilecontent(u),q.setDescription(o),q.setNewAttach(!0),q.setFileName(s.getName()),q.setDeleted(!1),q.getAttachments().add(r),j.getItem().add(q)}}log.info("**** Iniciando proceso "+b.processId+"....");var v=e.saveAndSendTask(b.username,b.password,b.companyId,b.processInstanceId,b.choosedState,i,b.comments,b.userId,b.completeTask,j,k,l,b.managerMode,b.threadSequence);b.log&&log.info("***  Resultado inicio proceso: "+b.processInstanceId+" "+v);var w={},x="";if(null!=v)for(var n=0;n<v.getItem().length;n++){var y=v.getItem().get(n),z=y.getItem().get(0),A=y.getItem().get(1);"ERROR"==z&&(x=A),w[z]=A}if(""!=x)throw"Error al guardar y/o enviar tarea: "+x;return w}catch(a){throw log.error("*** Error en crear proceso automatico "+b.processId+" :"+a),a}},cancelInstance:function(a){var b=this.simpleMerge({username:"",password:"",companyId:"",processInstanceId:"",userId:"",cancelText:"",workflowPackage:"com.fluig.bpm",workflowServiceName:"ECMWorkflowEngineService",log:0},a);try{var c=ServiceManager.getService(b.workflowServiceName).getBean(),d=c.instantiate(b.workflowPackage+".ECMWorkflowEngineServiceService"),e=d.getWorkflowEngineServicePort();log.info("**** cancelInstance "+b.processInstanceId+"....");var f=e.cancelInstance(b.username,b.password,b.companyId,b.processInstanceId,b.userId,b.cancelText);if(b.log&&log.info("***  Resultado cancelInstance: "+b.processInstanceId+" "+f),"OK"!=f)throw f}catch(a){throw log.error("*** Error en cancelInstance "+b.processInstanceId+" :"+a),a}}})',
	                "Arquimeda"]);	
	
	
	dataset.addRow(["com.arquimeda.fluig.js.ds.Sql-v1",
	                "sql",
	                "1",
	                "0",
	                '({error:function(r){log.error("*** com.arquimeda.fluig.js.ds.Sql: "+r);var e=DatasetBuilder.newDataset();return log.error(r),e.addColumn("error"),e.addRow(new Array(r)),e},simpleMerge:function(r,e){var t={};for(attrname in r)t[attrname]=r[attrname];for(attrname in e)t[attrname]=e[attrname];return t},sql2Dataset:function(r){var e=this.simpleMerge({jndiName:"java:/jdbc/FluigDS",sql:"",log:0},r),t=null,n=null,a=DatasetBuilder.newDataset();try{e.log&&log.info("** Obteniendo conexion "+e.jndiName),t=(new javax.naming.InitialContext).lookup(e.jndiName).getConnection(),n=t.createStatement(),e.log&&log.info("** Ejecutando query "+e.sql),rs=n.executeQuery(e.sql);for(var o=rs.getMetaData(),l=!0;rs.next();){for(var i=[],s=1;s<=o.getColumnCount();s++){var u=o.getColumnLabel(s),g=rs.getString(u);e.log>1&&log.info("** Valor "+u+":"+g),i.push(g),l&&(e.log&&log.info("** Agregando columna "+u),a.addColumn(u))}l=!1,a.addRow(i)}}catch(m){this.error(m)}finally{null!=n&&n.close(),null!=t&&t.close()}return a},whereHelper:function(r){var e=this.simpleMerge({constraints:[],filtros:{},log:0},r),t="1=1 ";try{var n=function(r,e){if(null!=e)for(var t=0;t<e.length;t++)if(e[t].fieldName==r)return e[t];return null};e.log&&log.error("*** Array de constraints:"+e.constraints);for(attrname in e.filtros){var a=n(attrname,e.constraints);e.log&&log.error("***  Buscando Constraint de `"+attrname+"`:"+a),null!=a&&(t+=e.filtros[attrname](a))}}catch(o){throw"Error whereHelper:"+o.message}return t}})',
	                "Arquimeda"]);
	
	dataset.addRow(["com.arquimeda.fluig.js.ds.Numerador-v1",
	                "num",
	                "1",
	                "0",
	                '({simpleMerge:function(e,o){var r={};for(attrname in e)r[attrname]=e[attrname];for(attrname in o)r[attrname]=o[attrname];return r},nextNumber:function(e){var o,r=this.simpleMerge({codigoNumerador:"",jndiName:"java:/jdbc/FluigDS",dialect:"mysql",table:"ARQ_NUMERADOR",sql:"",log:0},e),t={mysql:"SELECT CODIGO, PROXIMONUMERO FROM ARQ_NUMERADOR WHERE CODIGO = ? FOR UPDATE",sqlserver:"SELECT CODIGO, PROXIMONUMERO FROM ARQ_NUMERADOR WITH (UPDLOCK) WHERE CODIGO = ? "},a=null,l=null;if(""==r.codigoNumerador)throw"Debe informar el parametro codigoNumerador";try{var n=r.sql;if(""==n&&(n=t[r.dialect]),null==n||""==n)throw"No esta definido el sql para el dialect "+r.dialect;if(r.log&&log.info("** Obteniendo conexion "+r.jndiName),a=(new javax.naming.InitialContext).lookup(r.jndiName).getConnection(),r.log&&log.info("** Ejecutando prepareStatement "+n),l=a.prepareStatement(n,java.sql.ResultSet.TYPE_SCROLL_SENSITIVE,java.sql.ResultSet.CONCUR_UPDATABLE),l.setString(1,r.codigoNumerador),resultSet=l.executeQuery(),!resultSet.next())throw"No fue encontrado el registro para el numerador "+r.codigoNumerador;o=resultSet.getLong("PROXIMONUMERO"),r.log&&log.info("** Actualizando PROXIMONUMERO de "+r.codigoNumerador+" "+o+1),resultSet.updateLong("PROXIMONUMERO",o+1),resultSet.updateRow(),log.info("***  PROXIMONUMERO codigo: "+r.codigoNumerador+" valor: "+o)}catch(i){var O="*** Error nextNumber codigo: "+r.codigoNumerador+": "+i;throw log.error(O),O}finally{null!=l&&l.close(),null!=a&&a.close()}return o}})',
	                "Arquimeda"]);
	
	dataset.addRow(["com.arquimeda.fluig.js.Properties-v1",
	                "prop",
	                "1",
	                "0",
	                '({simpleMerge:function(e,a){var t={};for(attrname in e)t[attrname]=e[attrname];for(attrname in a)t[attrname]=a[attrname];return t},props:new java.util.HashMap,load:function(e){var a=this.simpleMerge({type:"DATASET",keyColumn:"clave",valueColumn:"valor",log:0,datasetName:"arq_properties",jndiName:"java:/jdbc/FluigDS",sql:"",path:"propertiesX.properties"},e);if("DATASET"==a.type)this.loadFromDataset(a);else{if("SQL"!=a.type)throw"No esta implementado el type "+a.type;this.loadFromSQL(a)}},get:function(e,a){var t=this.props.get(e);if(null==t&&void 0!=typeof a)throw"No se encontro la property con clave "+e;return t},loadFromDataset:function(e){if(!e.datasetName)throw"Debe indicar el parametro datasetName";e.log&&log.info("*** loadFromDataset - Cargando properties desde dataset "+e.datasetName);var a=DatasetFactory.getDataset(e.datasetName,null,null,null);if(null==a)throw"*** No se encontro el dataset: "+e.datasetName;e.log&&log.info("*** loadFromDataset - ds.rowsCount "+a.rowsCount);for(var t=0;t<a.rowsCount;t++){var o=a.getValue(t,e.keyColumn),r=a.getValue(t,e.valueColumn);e.log&&log.info("*** loadFromDataset - key:"+o+" value: "+r),this.props.put(o,r)}},loadFromSQL:function(e){var a=null,t=null;if(""==e.sql)throw"Debe informar el parametro sql";try{for(e.log&&log.info("** Obteniendo conexion "+e.jndiName),a=(new javax.naming.InitialContext).lookup(e.jndiName).getConnection(),t=a.createStatement(),e.log&&log.info("** Ejecutando query "+e.sql),rs=t.executeQuery(e.sql);rs.next();){var o=rs.getString(e.keyColumn),r=rs.getString(e.valueColumn);e.log&&log.info("*** loadFromDataset - key:"+o+" value: "+r),props.put(o,r)}}catch(l){throw"Error cargando properties desde SQL"+l}finally{null!=t&&t.close(),null!=a&&a.close()}}})',
	                "Arquimeda"]);
	
	dataset.addRow(["com.arquimeda.fluig.js.ds.CustomEmail-v1",
	                "mail",
	                "1",
	                "0",
	                '({simpleMerge:function(a,t){var e={};for(attrname in a)e[attrname]=a[attrname];for(attrname in t)e[attrname]=t[attrname];return e},sendCustomEmail:function(a){var t=this.simpleMerge({companyId:"1",subject:"",from:"notifier@fluig.com",to:"",templateId:"",templateDialect:"",templateHtml:"",datos:{},log:0},a),e="text/html",o=new java.util.HashMap,n=java.io.File.separator,l=(new javax.naming.InitialContext).lookup("java:global/fluig/ecm-ejb/wdk/GlobalParam"),m=l.read(t.companyId).getTemplatesFolder()+n+"tplmail"+n+t.templateId+n+t.templateDialect,r=(new javax.naming.InitialContext).lookup("java:global/fluig/wcm-core/service/SDK");if(o.put("SERVER_URL",r.getServerURL()),o.put("SERVER_EXTERNAL_URL",r.getServerContextURL()),o.put("SERVER_PROTECTED_URL",r.getProtectedTenantContextPath()),o.put("COMPANY_ID",t.companyId),t.datos)for(param in t.datos)o.put(param,t.datos[param]);com.fluig.foundation.mail.EMailSenderFactory.getEMailSender().customEmail(new java.lang.Long(t.companyId),t.subject,t.from,t.to,m,t.templateHtml,e,o)}})',
	                "Arquimeda"]);
	
	return dataset;
}